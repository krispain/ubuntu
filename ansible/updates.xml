---
- hosts: localhost

  tasks:
    - name: Update all pacakges
      apt:
        name: "*"
        update_cache: true
        state: latest
      register: result
    - name: Show updated packages
      when: result is changed
      debug: msg="{{ result.results }}"

    - name: Upgrade all flatpaks
      ansible.builtin.command: 
        flatpak update --noninteractive
      register: result
      changed_when: "'Nothing to do' not in result.stdout"
    - name: Show updated flatpaks
      when: result is changed
      debug: msg="{{ result.stdout_lines }}"

    - name: Update linphone appimage
      ansible.builtin.get_url:
        url: https://linphone.org/releases/linux/latest_app
        dest: /usr/local/bin/linphone
        mode: '0755'

